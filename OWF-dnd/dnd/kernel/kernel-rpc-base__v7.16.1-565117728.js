var Ozone=Ozone||{};Ozone.eventing=Ozone.eventing||{};Ozone.eventing.rpc=Ozone.eventing.rpc||{};Ozone.eventing.rpc.priv=Ozone.eventing.rpc.priv||{};if(typeof JSON==="undefined"){JSON=gadgets.json}(function(b){var e="_widgetReady",d="_getWidgetReady",j={},h={},g={},a={},c={};function i(k){k=k||{};b.getIframeId=k.getIframeId;function n(s,t){gadgets.rpc.call(b.getIframeId(s),"DIRECT_MESSAGEL_CLIENT",null,t)}gadgets.rpc.register("DIRECT_MESSAGE",n);function p(t,s,u,v){gadgets.rpc.call(b.getIframeId(t),"FUNCTION_CALL_CLIENT",null,t,s,u,v)}gadgets.rpc.register("FUNCTION_CALL",p);function l(u,t,v,s){gadgets.rpc.call(b.getIframeId(t),"FUNCTION_CALL_RESULT_CLIENT",null,u,v,s)}gadgets.rpc.register("FUNCTION_CALL_RESULT",l);function o(u,s){var t=h[s]||[];t.push(u);h[s]=t}gadgets.rpc.register("ADD_EVENT",o);function r(s,w){var u=h[s];for(var t=0;t<u.length;t++){var v=u[t];gadgets.rpc.call(b.getIframeId(v),"EVENT_CLIENT",null,s,w)}}gadgets.rpc.register("CALL_EVENT",r);function q(t,u){var s=document.getElementById(b.getIframeId(t));setTimeout(function(){document.body.removeChild(s.parentNode)},500)}gadgets.rpc.register("CLOSE_EVENT",q);function m(s,u){var t=j[s];if(g[s]==null){g[s]=[]}if(u!=null){g[s].push(u)}return t!=null?t:[]}gadgets.rpc.register("GET_FUNCTIONS",m);b.priv.clientToldUsFunctionsHandler=function(v,t,u){var s=JSON.parse(v).id;j[s]=u};b.priv.clientToldUsFunctionsHandlerAfterInit=function(z,y){var w=JSON.parse(z).id;if(!j[w]){j[w]=y;return}var x;for(var v=0,s=y.length;v<s;v++){x=false;for(var u=0,t=j[w].length;u<t;u++){if(y[v]===j[w][u]){x=true;break}}if(x===false){j[w].push(y[v])}}};gadgets.rpc.register("register_functions",function(t,s){b.priv.clientToldUsFunctionsHandlerAfterInit(t,s)});gadgets.rpc.register(e,function(w){var x=g[w],t=a[w],u,s;c[w]=true;if(x){for(u=0,s=x.length;u<s;u++){var v=x[u];if(v){gadgets.rpc.call(v,e,null,w)}}}if(t){while(t.length){t.shift()()}}});gadgets.rpc.register(d,function(s,t){return c[s]==true})}function f(l,k){if(c[l]){k()}else{a[l]=(a[l]||[]).concat(k)}}b.init=i;b.onReady=f})(Ozone.eventing.rpc);