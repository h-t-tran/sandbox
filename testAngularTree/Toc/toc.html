<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link rel="stylesheet" href="./assets/jsTree/themes/default/style.min.css" />

    <script>



        var tocSvc;
        var toc;

        function buildTree() {

            //////////////////////////////////////
            //
            //var flag = false;
            //$.jstree.defaults.contextmenu.select_node = true;
            //console.debug("$.jstree.defaults.contextmenu ", $.jstree.defaults.contextmenu);

            tocSvc = new TocSvc();
            toc = new Toc({
                jquery : $,
                treeAnchorDiv : $("#jstree_demo2"),
                tocSvc : tocSvc
            });
            toc.initialize();
            toc.getAllBookmarks();

            // this event happens first
            $('#jstree_demo2').on("loaded.jstree", function (e, data) {
                console.log("loaded.jstree 2");
            });

            // this event happens once ajax returns
            $('#jstree_demo2').on("ready.jstree", function (e, data) {
                console.log("ready.jstree 2");
            });

            $('#jstree_demo2').on("show_contextmenu.jstree", function (event, data) {

                var node = data.node;
                console.log("show_contextmenu.jstree node ", node);

                var payload = node.original;
                console.log("node payload ", payload)
            });



        }

        function getData() {
            toc.getAllBookmarks();
        }

    </script>
</head>
<body onload="buildTree()">
    <div id="jstree_demo2" style="margin-top:1em; min-height:200px; "></div>
    <button class="btn btn-default" type="submit" onclick="getData()">Build Tree</button>
</body>


<script src="./assets/jquery.min.js"></script>
<script src="./assets/jsTree/jstree.min.js"></script>
<script src="./toc.js"></script>
<script src="./tocSvc.js"></script>
</html>